# =============================================================================
# Odoo 18 Staging Environment Variables
# =============================================================================
# Staging environment tests the SAME images as production
# cp .env.example .env
# =============================================================================

# Docker Compose Project Name (REQUIRED for multi-environment isolation)
# This prevents staging and production from conflicting on the same server
COMPOSE_PROJECT_NAME=seisei-odoo18-staging

# Image Reference with Digest Pinning (REQUIRED for immutable deployments)
# ⚠️  STAGING: Must use digest (image@sha256:...), NOT tags
# ⚠️  This value is set automatically by deploy.sh from digest manifest
# Format: ghcr.io/cameltravel666-crypto/seisei-odoo18@sha256:abc123...
IMAGE_REF=ghcr.io/cameltravel666-crypto/seisei-odoo18@sha256:placeholder

# Database Configuration
# Use seisei-db with staging databases (ten_staging, etc.)
# OR use dedicated staging-db (recommended for full isolation)
DB_HOST=seisei-db
DB_USER=odoo
DB_PASSWORD=odoo

# Redis Cache
REDIS_PASSWORD=staging-redis-password-change-me

# OCR Service (shared with production)
OCR_SERVICE_URL=http://172.17.0.1:8180/api/v1
OCR_SERVICE_KEY=same-as-production-ocr-key

# S3 Storage - use staging bucket or separate folder
SEISEI_S3_BUCKET=seisei-odoo-staging
SEISEI_S3_REGION=ap-northeast-1
SEISEI_S3_ACCESS_KEY=staging-s3-access-key
SEISEI_S3_SECRET_KEY=staging-s3-secret-key

# =============================================================================
# Deployment & Testing Workflow
# =============================================================================
# 1. Update ODOO18_IMAGE_TAG (use 'latest' or specific SHA)
# 2. Run: docker compose pull
# 3. Run: docker compose up -d
# 4. Run smoke tests: ../../../scripts/smoke-test.sh odoo18-staging
# 5. If tests pass, deploy same image to production
# 6. If tests fail, fix issues and rebuild
# =============================================================================
