[options]
; =============================================================================
; Seisei Odoo 18 Production Configuration
; =============================================================================
; This config is baked into the immutable Docker image
; DO NOT mount this file at runtime - it's included in the image
; =============================================================================

; Addons path - includes all custom modules from /mnt/extra-addons
; The odoo_modules/ directory is copied to /mnt/extra-addons during build
addons_path = /mnt/extra-addons,/usr/lib/python3/dist-packages/odoo/addons

; Data directory (this MUST be a volume mount for persistence)
data_dir = /var/lib/odoo

; Database connection (configured via environment variables)
db_host = db
db_port = 5432
db_user = odoo
; db_password is set via environment variable PASSWORD

; Admin password for database management
admin_passwd = ${ADMIN_PASSWORD:-changeme}

; =============================================================================
; Worker Configuration (Production)
; =============================================================================
; 5 workers for handling HTTP requests
workers = 5
; 2 threads for cron jobs
max_cron_threads = 2

; =============================================================================
; Memory Limits (Production - Higher limits)
; =============================================================================
; Soft limit: 1GB - worker restarts after reaching this
limit_memory_soft = 1073741824
; Hard limit: 1.25GB - worker killed if exceeds this
limit_memory_hard = 1342177280
; CPU time limit: 15 minutes
limit_time_cpu = 900
; Real time limit: 30 minutes
limit_time_real = 1800

; =============================================================================
; Proxy Mode (Required behind Traefik)
; =============================================================================
proxy_mode = True

; =============================================================================
; Longpolling / WebSocket (Odoo 18)
; =============================================================================
; gevent_port is the correct parameter name for Odoo 18
; This port handles longpolling and websocket connections
gevent_port = 8072

; =============================================================================
; Database Filter
; =============================================================================
; Exclude system databases from listing
dbfilter = ^(?!postgres|template).*$

; =============================================================================
; Logging
; =============================================================================
; Production: warn level to reduce log volume
log_level = warn
; Log to stdout for Docker (remove logfile for container logging)
; logfile = /var/log/odoo/odoo.log
