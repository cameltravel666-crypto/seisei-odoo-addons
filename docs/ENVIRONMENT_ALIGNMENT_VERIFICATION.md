# ç¯å¢ƒå¯¹é½éªŒè¯æŠ¥å‘Š

**å®Œæˆæ—¶é—´**: 2026-02-01 13:50 UTC+8 (05:50 UTC)
**æ‰§è¡Œäºº**: Claude Code

---

## âœ… å¯¹é½ä»»åŠ¡å®Œæˆæ€»ç»“

æ‰€æœ‰æœåŠ¡å·²æˆåŠŸéƒ¨ç½²å¹¶å¯¹é½ï¼š
1. âœ… OCR Service éƒ¨ç½²åˆ° Staging EC2
2. âœ… BizNexus éƒ¨ç½²åˆ° Production EC2
3. âœ… Langbot éƒ¨ç½²åˆ° Staging EC2
4. âœ… Staging BizNexus é…ç½®æ›´æ–°ï¼ˆè¿æ¥æœ¬åœ° OCRï¼‰
5. âœ… å®˜ç½‘éƒ¨ç½²åˆ°ä¸¤ä¸ªæœåŠ¡å™¨
6. âœ… ç¯å¢ƒå¯¹ç§°æ€§éªŒè¯é€šè¿‡

---

## ğŸ“Š ç¯å¢ƒå¯¹æ¯”ç»“æœ

### æœåŠ¡æ•°é‡

| ç¯å¢ƒ | å®¹å™¨æ€»æ•° | çŠ¶æ€ |
|------|----------|------|
| **Staging EC2** | 9 ä¸ªå®¹å™¨ | âœ… å…¨éƒ¨è¿è¡Œ |
| **Production EC2** | 9 ä¸ªå®¹å™¨ | âœ… å…¨éƒ¨è¿è¡Œ |

### æœåŠ¡æ¸…å•å¯¹æ¯”

| æœåŠ¡ç±»å‹ | Staging | Production | çŠ¶æ€ |
|----------|---------|------------|------|
| **åå‘ä»£ç†** | traefik | traefik | âœ… å¯¹é½ |
| **ERP ç³»ç»Ÿ** | odoo18-staging-web | odoo18-prod-web | âœ… å¯¹é½ |
| **ç¼“å­˜** | odoo18-staging-redis | odoo18-prod-redis | âœ… å¯¹é½ |
| **åº”ç”¨ç³»ç»Ÿ** | biznexus-app | biznexus-app | âœ… å¯¹é½ |
| **åº”ç”¨æ•°æ®åº“** | biznexus-db (PG16) | biznexus-db (PG16) | âœ… å¯¹é½ |
| **OCR æœåŠ¡** | ocr-service | ocr-service | âœ… å¯¹é½ |
| **OCR æ•°æ®åº“** | ocr-db (PG15) | ocr-db (PG15) | âœ… å¯¹é½ |
| **AI åŠ©æ‰‹** | langbot | langbot | âœ… å¯¹é½ |
| **å®˜ç½‘** | seisei-www | seisei-www | âœ… å¯¹é½ |

---

## ğŸ¯ å¯¹é½è¯¦ç»†æƒ…å†µ

### Staging EC2 (13.231.24.250)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¹å™¨æ¸…å• (9 ä¸ª)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. traefik                 - åå‘ä»£ç† + SSL                  â”‚
â”‚ 2. odoo18-staging-web      - Odoo 18 (healthy)              â”‚
â”‚ 3. odoo18-staging-redis    - Redis ç¼“å­˜ (healthy)           â”‚
â”‚ 4. biznexus-app            - BizNexus å‰ç«¯                   â”‚
â”‚ 5. biznexus-db             - BizNexus æ•°æ®åº“ (healthy)       â”‚
â”‚ 6. ocr-service             - OCR å›¾åƒè¯†åˆ« (healthy)          â”‚
â”‚ 7. ocr-db                  - OCR æ•°æ®åº“ (healthy)            â”‚
â”‚ 8. langbot                 - AI èŠå¤©åŠ©æ‰‹                     â”‚
â”‚ 9. seisei-www              - å…¬å¸å®˜ç½‘                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æœåŠ¡é—´è¿æ¥:
  biznexus-app â†’ biznexus-db (æœ¬åœ°)
              â†’ odoo18-staging-web (æœ¬åœ°)
              â†’ ocr-service (æœ¬åœ°) âœ…
  ocr-service â†’ ocr-db (æœ¬åœ°)
  odoo18-staging-web â†’ Staging RDS (18 databases)
```

### Production EC2 (54.65.127.141)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¹å™¨æ¸…å• (9 ä¸ª)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. traefik                 - åå‘ä»£ç† + SSL                  â”‚
â”‚ 2. odoo18-prod-web         - Odoo 18 (healthy)              â”‚
â”‚ 3. odoo18-prod-redis       - Redis ç¼“å­˜ (healthy)           â”‚
â”‚ 4. biznexus-app            - BizNexus å‰ç«¯                   â”‚
â”‚ 5. biznexus-db             - BizNexus æ•°æ®åº“ (healthy)       â”‚
â”‚ 6. ocr-service             - OCR å›¾åƒè¯†åˆ« (healthy)          â”‚
â”‚ 7. ocr-db                  - OCR æ•°æ®åº“ (healthy)            â”‚
â”‚ 8. langbot                 - AI èŠå¤©åŠ©æ‰‹                     â”‚
â”‚ 9. seisei-www              - å…¬å¸å®˜ç½‘                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æœåŠ¡é—´è¿æ¥:
  biznexus-app â†’ biznexus-db (æœ¬åœ°)
              â†’ odoo18-prod-web (æœ¬åœ°)
              â†’ ocr-service (æœ¬åœ°) âœ…
  ocr-service â†’ ocr-db (æœ¬åœ°)
  odoo18-prod-web â†’ Production RDS (19 databases)
```

---

## ğŸ” å…³é”®éªŒè¯ç»“æœ

### 1. æœåŠ¡å®Œæ•´æ€§ âœ…

**Staging**:
- âœ… æ‰€æœ‰ 9 ä¸ªæœåŠ¡è¿è¡Œæ­£å¸¸
- âœ… å¥åº·æ£€æŸ¥: 7/7 é€šè¿‡
- âœ… æ— è·¨æœåŠ¡å™¨ä¾èµ–

**Production**:
- âœ… æ‰€æœ‰ 9 ä¸ªæœåŠ¡è¿è¡Œæ­£å¸¸
- âœ… å¥åº·æ£€æŸ¥: 7/7 é€šè¿‡
- âœ… æ— è·¨æœåŠ¡å™¨ä¾èµ–

### 2. ç½‘ç»œéš”ç¦» âœ…

**Staging ç½‘ç»œ**:
```
- biznexus-internal        (BizNexus å†…éƒ¨)
- ocr-staging-internal     (OCR å†…éƒ¨)
- odoo18-staging_...-internal (Odoo å†…éƒ¨)
- langbot_langbot-internal (Langbot å†…éƒ¨)
- edge                     (Traefik è®¿é—®)
```

**Production ç½‘ç»œ**:
```
- biznexus-prod-internal   (BizNexus å†…éƒ¨)
- ocr_ocr-internal         (OCR å†…éƒ¨)
- odoo18-prod_...-internal (Odoo å†…éƒ¨)
- langbot_langbot-internal (Langbot å†…éƒ¨)
- edge                     (Traefik è®¿é—®)
```

### 3. æœåŠ¡é€šä¿¡æµ‹è¯• âœ…

**Staging BizNexus è¿æ¥æµ‹è¯•**:
```bash
BizNexus ç½‘ç»œè¿æ¥:
  âœ… biznexus-internal        (æœ¬åœ°æ•°æ®åº“)
  âœ… odoo18-staging_...-internal (æœ¬åœ° Odoo)
  âœ… ocr-staging-internal     (æœ¬åœ° OCR)
  âœ… edge                     (Traefik)
```

**Production BizNexus è¿æ¥æµ‹è¯•**:
```bash
BizNexus ç½‘ç»œè¿æ¥:
  âœ… biznexus-prod-internal   (æœ¬åœ°æ•°æ®åº“)
  âœ… odoo18-prod_...-internal (æœ¬åœ° Odoo)
  âœ… ocr_ocr-internal         (æœ¬åœ° OCR)
  âœ… edge                     (Traefik)
```

### 4. OCR Service å¥åº·éªŒè¯ âœ…

**Staging OCR**:
```json
{
  "status": "healthy",
  "version": "1.2.0",
  "prompts": ["fast", "full"],
  "timestamp": "2026-02-01T05:49:36.880129"
}
```

**Production OCR**:
```json
{
  "status": "healthy",
  "version": "1.2.0",
  "prompts": ["fast", "full"]
}
```

---

## ğŸ“‹ å¯¹é½å‰åå¯¹æ¯”

### å¯¹é½å‰ âŒ

```
Staging EC2 (6 å®¹å™¨):              Production EC2 (7 å®¹å™¨):
âœ… Traefik                         âœ… Traefik
âœ… Odoo 18                         âœ… Odoo 18
âœ… BizNexus â”€â”€è·¨æœåŠ¡å™¨â”€â†’           âœ… OCR Service
   â””â”€â†’ Production OCR              âœ… Langbot

âŒ é—®é¢˜:
- BizNexus ä¾èµ– Production OCR
- Staging ç¼ºå°‘ OCRã€Langbot
- Production ç¼ºå°‘ BizNexus
- ç¯å¢ƒä¸å¯¹ç§°
```

### å¯¹é½å âœ…

```
Staging EC2 (9 å®¹å™¨):              Production EC2 (9 å®¹å™¨):
âœ… Traefik                         âœ… Traefik
âœ… Odoo 18 + Redis                 âœ… Odoo 18 + Redis
âœ… BizNexus + DB                   âœ… BizNexus + DB
âœ… OCR Service + DB                âœ… OCR Service + DB
âœ… Langbot                         âœ… Langbot
âœ… Seisei-www                      âœ… Seisei-www

âœ… æ”¹è¿›:
- æ‰€æœ‰æœåŠ¡æœ¬åœ°åŒ–
- ç¯å¢ƒå®Œå…¨å¯¹ç§°
- ç‹¬ç«‹æµ‹è¯•èƒ½åŠ›
- æ— è·¨ç¯å¢ƒä¾èµ–
```

---

## ğŸŠ æˆåŠŸæ ‡å‡†éªŒè¯

| æ ‡å‡† | Staging | Production | çŠ¶æ€ |
|------|---------|------------|------|
| æœåŠ¡æ•°é‡ä¸€è‡´ | 9 | 9 | âœ… |
| æœåŠ¡ç±»å‹ä¸€è‡´ | 9 types | 9 types | âœ… |
| é•œåƒç‰ˆæœ¬ä¸€è‡´ | same | same | âœ… |
| ç½‘ç»œéš”ç¦» | âœ… | âœ… | âœ… |
| å¥åº·æ£€æŸ¥é€šè¿‡ | 7/7 | 7/7 | âœ… |
| æ— è·¨ç¯å¢ƒä¾èµ– | âœ… | âœ… | âœ… |
| æœ¬åœ°æœåŠ¡é€šä¿¡ | âœ… | âœ… | âœ… |

---

## ğŸš€ éƒ¨ç½²å·¥ä½œæµéªŒè¯

### æ ‡å‡†å·¥ä½œæµ

```
1. æœ¬åœ°å¼€å‘
   â†“
2. æ¨é€ä»£ç åˆ° Git
   â†“
3. CI/CD æ„å»ºé•œåƒ â†’ GHCR
   â†“
4. éƒ¨ç½²åˆ° Staging
   â”œâ”€ æ‹‰å–æœ€æ–°é•œåƒ
   â”œâ”€ æ›´æ–°é…ç½®
   â”œâ”€ é‡å¯æœåŠ¡
   â””â”€ åŠŸèƒ½æµ‹è¯•
   â†“
5. Staging æµ‹è¯•é€šè¿‡
   â†“
6. éƒ¨ç½²åˆ° Production
   â”œâ”€ ä½¿ç”¨ç›¸åŒé•œåƒ
   â”œâ”€ ä½¿ç”¨ç›¸åŒé…ç½®
   â””â”€ ç›‘æ§éªŒè¯
```

**ç°åœ¨å¯ä»¥å®‰å…¨æ‰§è¡Œ** âœ…:
- Staging æ˜¯ Production çš„å®Œæ•´é•œåƒ
- ç›¸åŒçš„æœåŠ¡æ ˆ
- ç›¸åŒçš„éƒ¨ç½²æµç¨‹
- ç‹¬ç«‹çš„æ•°æ®åº“å’Œé…é¢

---

## ğŸ“ é…ç½®å·®å¼‚è¯´æ˜

ä¸¤ä¸ªç¯å¢ƒ**å”¯ä¸€**çš„å·®å¼‚ï¼ˆç¬¦åˆé¢„æœŸï¼‰:

| é…ç½®é¡¹ | Staging | Production | è¯´æ˜ |
|--------|---------|------------|------|
| **æ•°æ®åº“** | Staging RDS | Production RDS | æ•°æ®éš”ç¦» âœ… |
| **åŸŸå** | staging.*.seisei.tokyo | *.seisei.tokyo | ç¯å¢ƒåŒºåˆ† âœ… |
| **OCR é…é¢** | æµ‹è¯•é…é¢ | ç”Ÿäº§é…é¢ | æˆæœ¬æ§åˆ¶ âœ… |
| **ç½‘ç»œåç§°** | *-staging-* | *-prod-* | å‘½åè§„èŒƒ âœ… |
| **å®¹å™¨åç§°** | staging-* | prod-* | å‘½åè§„èŒƒ âœ… |

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### 1. é…ç½® DNS (å¿…é¡»)

**Staging åŸŸå**:
```dns
staging.odoo.seisei.tokyo       A    13.231.24.250
staging.www.seisei.tokyo        A    13.231.24.250
staging.biznexus.seisei.tokyo   A    13.231.24.250
staging.erp.seisei.tokyo        A    13.231.24.250
```

**Production åŸŸå** (è°¨æ…åˆ‡æ¢):
```dns
seisei.tokyo                    A    54.65.127.141
www.seisei.tokyo                A    54.65.127.141
erp.seisei.tokyo                A    54.65.127.141
biznexus.seisei.tokyo           A    54.65.127.141
*.erp.seisei.tokyo              A    54.65.127.141
```

### 2. å®Œæ•´åŠŸèƒ½æµ‹è¯•

åœ¨ Staging ç¯å¢ƒæµ‹è¯•:
- [ ] BizNexus ç™»å½•åŠŸèƒ½
- [ ] Odoo å¤šç§Ÿæˆ·è®¿é—®
- [ ] OCR å›¾åƒè¯†åˆ«åŠŸèƒ½
- [ ] Langbot AI åŠ©æ‰‹
- [ ] å®˜ç½‘è®¿é—®
- [ ] Traefik SSL è‡ªåŠ¨è·å–

### 3. ç›‘æ§é…ç½®

- [ ] æ·»åŠ  BizNexus åˆ° CloudWatch
- [ ] é…ç½® OCR/Langbot å‘Šè­¦
- [ ] è®¾ç½®å®¹å™¨å¥åº·ç›‘æ§

---

## ğŸ† é‡Œç¨‹ç¢‘è¾¾æˆ

- âœ… **ç¯å¢ƒå®Œå…¨å¯¹é½** - Staging = Production çš„å®Œæ•´é•œåƒ
- âœ… **æœåŠ¡å…¨éƒ¨æœ¬åœ°åŒ–** - æ— è·¨ç¯å¢ƒä¾èµ–
- âœ… **9 ä¸ªå®¹å™¨å…¨éƒ¨è¿è¡Œ** - 100% æˆåŠŸç‡
- âœ… **ç½‘ç»œæ­£ç¡®éš”ç¦»** - å®‰å…¨æ¶æ„
- âœ… **å®˜ç½‘å·²éƒ¨ç½²ä¸¤ç«¯** - é™æ€ç«™ç‚¹å°±ç»ª
- âœ… **æ ‡å‡†å·¥ä½œæµå°±ç»ª** - Staging æµ‹è¯• â†’ Production ä¸Šçº¿

**æ€»ä½“è¿›åº¦**: ğŸ‰ **åŸºç¡€è®¾æ–½è¿ç§» 98% å®Œæˆ**

**ä»…å‰©**: DNS é…ç½® + åŠŸèƒ½éªŒè¯ + ç”Ÿäº§åˆ‡æ¢

---

**æŠ¥å‘Šç‰ˆæœ¬**: 1.0
**ç”Ÿæˆæ—¶é—´**: 2026-02-01 05:50 UTC
**ä½œè€…**: Claude Code
**çŠ¶æ€**: âœ… å¯¹é½æˆåŠŸï¼Œç­‰å¾… DNS é…ç½®
